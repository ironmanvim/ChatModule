(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{140:function(e,t,a){e.exports=a.p+"static/media/Avatar.037763eb.png"},141:function(e,t,a){e.exports=a.p+"static/media/trial.b337d9e6.png"},260:function(e,t,a){e.exports=a(584)},265:function(e,t,a){},316:function(e,t){},318:function(e,t){},348:function(e,t){},349:function(e,t){},393:function(e,t){},395:function(e,t){},418:function(e,t){},530:function(e,t){},572:function(e,t,a){},573:function(e,t,a){},574:function(e,t,a){},576:function(e,t,a){},582:function(e,t,a){},583:function(e,t,a){e.exports=a.p+"static/media/trial.24867704.mp4"},584:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(251),i=a.n(r),c=(a(265),a(72)),o=a(8),l=a(9),u=a(10),h=a(12),m=a(11),p=a(91),d=a(13),f=a(93),g=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e={fontSize:this.props.size+"pt",color:this.props.color},t={position:"absolute"};switch(this.props.position){case"top-left":t.top=0,t.left=0;break;case"top-right":t.top=0,t.right=0;break;case"bottom-left":t.bottom=0,t.left=0;break;case"bottom-right":t.bottom=0,t.right=0}return s.a.createElement("span",{className:this.props.display?"notify-icon":"hide",style:t},s.a.createElement("i",{className:"fa fa-circle ",style:e}," "))}}]),t}(s.a.Component),v=a(1),y=a(258),b=a(71),E=a.n(b),C=a(254),j=a.n(C),O=a(92),S=a.n(O),w=(a(572),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={loading:!1,metadata:null,error:null},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),j()("https://cors-anywhere.herokuapp.com/".concat(this.props.url)).then((function(t){e.setState({loading:!1,metadata:t}),console.log(t)}),(function(e){this.setState({loading:!1,error:e}),console.log(e)})),setTimeout((function(){e.state.loading&&e.setState({loading:!1,error:!0})}),1e4)}},{key:"componentDidUpdate",value:function(e,t,a){}},{key:"render",value:function(){return s.a.createElement("div",{className:"metadata"},this.state.loading?s.a.createElement("div",{className:"metadata-loading"},s.a.createElement(S.a,{type:"bars",width:50,color:"#43425D"})):!this.state.error&&this.state.metadata?s.a.createElement("div",{className:"metadata-data"},s.a.createElement("div",{className:"metadata-favicon"},s.a.createElement("img",{src:"".concat(this.state.metadata.image),alt:""})),s.a.createElement("div",{className:"metadata-info"},s.a.createElement("div",{className:"metadata-title"},s.a.createElement("a",{href:this.props.url,target:"_blank",rel:"noopener noreferrer"},this.state.metadata.title)),s.a.createElement("div",{className:"metadata-desc"},this.state.metadata.description))):null)}}]),t}(s.a.Component));Array.prototype.lastFind=function(e){for(var t=this.length-1;t>=0;--t){var a=this[t];if(e(a))return a}};var N=6e4,M=60*N,k=24*M;function P(e){var t=Date.now();if(e>t||e<=0)return null;var a=t-e;if(a<2500)return"online";if(a<N)return"last seen recently";if(a<2*N)return"a minute ago";if(a<50*N)return"".concat(Math.floor(a/N)," minutes ago");if(a<90*N)return"an hour ago";if(a<24*M)return"".concat(Math.floor(a/M)," hours ago");if(a<48*M)return"yesterday";if(a<10*k)return"".concat(Math.floor(a/k)," days ago");var n=new Date(e);return"".concat(n.getDate(),"/").concat(n.getMonth()+1,"/").concat(n.getFullYear())}var A=/(?:(?:https?|ftp):\/\/|\b(?:[a-z\d]+\.))(?:(?:[^\s()<>]+|\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))?\))+(?:\((?:[^\s()<>]+|(?:\(?:[^\s()<>]+\)))?\)|[^\s`!()[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))?/,F=/^(\s*)$/;function x(e){return e.split(/(\s+)/).map((function(e){return e.match(A)?{word:e,type:"link"}:{word:e,type:"text"}}))}var T=a(255),I=a.n(T),L=a(256),D=a.n(L);a(573),a(574),a(575);function U(){return s.a.createElement(S.a,{type:"spin",color:"gray",width:20,height:20})}var B=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).onSearchInput=function(e){var t=e.target.value;a.props.onSearch(t)},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"chat-search-bar"},s.a.createElement("div",{className:"chat-search-wrapper"},s.a.createElement("div",{className:"chat-search-icon"},s.a.createElement("i",{className:"fa fa-search"}," ")),s.a.createElement("div",{className:"chat-search-input"},s.a.createElement("input",{type:"text",onChange:this.onSearchInput}))))}}]),t}(s.a.Component),z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).getStatusWithTimestamp=function(){return P(a.props.time)},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){e.forceUpdate()}),2500)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e="";return this.props.currentChatId===this.props.id&&(e="current"),s.a.createElement("div",{className:"chat-list-item ".concat(e),onClick:this.props.updateCurrentChat},s.a.createElement("div",{className:"chat-list-item-image"},s.a.createElement("img",{src:this.props.avatar,alt:""}),"online"===this.getStatusWithTimestamp()&&s.a.createElement(g,{size:"8",position:"bottom-right",color:"lawngreen"})),s.a.createElement("div",{className:"chat-list-item-info"},s.a.createElement("div",{className:"chat-list-item-name"},this.props.name),s.a.createElement("div",{className:"chat-list-item-desc"},this.props.desc)),s.a.createElement("div",{className:"chat-list-item-details"},s.a.createElement("div",{className:"chat-list-item-time"},this.getStatusWithTimestamp()),"current"!==e&&this.props.unreadMsgCount>0&&s.a.createElement("div",{className:"chat-list-item-msg_count"},this.props.unreadMsgCount),"current"!==e&&-1===this.props.unreadMsgCount&&s.a.createElement("div",{className:"chat-list-item-msg_count"})))}}]),t}(s.a.Component),H=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"chat-list-items"},this.props.loadingList&&s.a.createElement("div",{className:"chat-list-item loading"},s.a.createElement(U,null)),this.props.list.map((function(t){return s.a.createElement(z,{key:t.id,id:t.id,avatar:t.avatar,desc:t.desc,name:t.name,time:t.lastSeen,unreadMsgCount:t.messageCount,currentChatId:e.props.currentChatId,updateCurrentChat:function(){e.props.updateCurrentChat(t.id)}})})))}}]),t}(s.a.Component),W=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=null;return 0===this.props.status?e=s.a.createElement("i",{className:"far fa-clock"}," "):1===this.props.status?e=s.a.createElement("i",{className:"fas fa-check"}," "):2===this.props.status?e=s.a.createElement("i",{className:"fas fa-check-double"}," "):3===this.props.status&&(e=s.a.createElement("i",{style:{color:"#b0ee9f"},className:"fas fa-check-double"}," ")),e}}]),t}(s.a.Component),_=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={search:""},a.onSearch=function(e){a.setState({search:e})},a.getFilteredList=function(){var e=a.props.chat.list.sort((function(e,t){return t.latestMessageTime-e.latestMessageTime})).filter((function(e){return 0!==a.state.search.length?e.name.toLowerCase().includes(a.state.search.toLowerCase()):"group"===e.chatType||0!==e.messages.length})).map((function(e){return{avatar:e.avatar,name:e.name,id:e.id,messageCount:e.unread,lastSeen:e.lastSeen,desc:function(){var t=e.messages;if(t.length>0){var a=t[t.length-1],n=0===a.by&&s.a.createElement("div",{className:"chat-message_delivery_status"},s.a.createElement(W,{status:a.read}));if("text"===a.type)return s.a.createElement("span",null,n,a.data);if("image"===a.type)return s.a.createElement("span",null,n,s.a.createElement("i",{className:"far fa-file-image"}," ")," image");if("video"===a.type)return s.a.createElement("span",null,n,s.a.createElement("i",{className:"far fa-file-video"}," ")," video");if("document"===a.type)return s.a.createElement("span",null,n,s.a.createElement("i",{className:"far fa-file"}," ")," document")}return""}()}}));return a.state.search.length>0&&0===e.length&&!a.props.loadingList&&a.props.more&&a.props.searchPerson(a.state.search),a.props.loadingList&&0===a.state.search.length&&a.props.noLoadingList(),e},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"chat-list"},s.a.createElement(B,{onSearch:this.onSearch}),s.a.createElement(H,{list:this.getFilteredList(),currentChatId:this.props.chat.currentChatId,updateCurrentChat:this.props.updateCurrentChat,loadingList:this.props.loadingList}))}}]),t}(s.a.Component),R=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).getStatusWithTimestamp=function(){return P(a.props.time)},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){e.forceUpdate()}),2500)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return s.a.createElement("div",{className:"chat-header"},s.a.createElement("div",{className:"chat-list-item-image"},s.a.createElement("img",{src:this.props.avatar,alt:""}),"online"===this.getStatusWithTimestamp()?s.a.createElement(g,{size:"8",position:"bottom-right",color:"lawngreen"}):null),s.a.createElement("div",{className:"chat-list-item-info"},s.a.createElement("div",{className:"chat-list-item-name"},this.props.name),s.a.createElement("div",{className:"chat-list-item-desc"},this.getStatusWithTimestamp())),s.a.createElement("div",{className:"chat-close",onClick:this.props.closeCurrentChat},s.a.createElement("i",{className:"fas fa-times"}," ")))}}]),t}(s.a.Component),V=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).showFullScreen=function(){var e=a.props.message;switch(e.type){case"image":a.context.showFullScreen(e.data.image,"image");break;case"video":a.context.showFullScreen(e.data.video,"video")}},a.downloadFile=function(){var e=a.props.message;D()(e.data.file)},a.getTime=function(){return function(e){var t=new Date(e);return"".concat(t.getHours(),":").concat(t.getMinutes())}(a.props.message.time)},a.getConvertedMessage=function(e){var t=x(e),a=null;return[t.map((function(e,t){return"link"===e.type?(a=e.word,s.a.createElement("a",{key:t,href:e.word},e.word)):e.word})),a]},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.message,t=null;switch(e.type){case"text":var a=this.getConvertedMessage(e.data);t=s.a.createElement("div",null,!!a[1]&&s.a.createElement("div",{className:"chat-url_metadata",onClick:this.showFullScreen},s.a.createElement(w,{url:a[1]})),a[0]);break;case"image":t=s.a.createElement("div",null,s.a.createElement("div",{className:"chat-line-image",onClick:this.showFullScreen},s.a.createElement("img",{src:e.data.image,alt:"",onLoad:this.props.onLoad})),this.getConvertedMessage(e.data.caption));break;case"video":t=s.a.createElement("div",null,s.a.createElement("div",{className:"chat-line-video",onClick:this.showFullScreen},s.a.createElement(I.a,{videoUrl:e.data.video,onLoad:this.props.onLoad}),s.a.createElement("div",{className:"chat-video-play-icon"},s.a.createElement("i",{className:"fa fa-play"}," "))),this.getConvertedMessage(e.data.caption));break;case"document":t=s.a.createElement("div",null,s.a.createElement("div",{className:"chat-line-document",onClick:this.downloadFile},s.a.createElement("i",{className:"fa fa-file"}," "),s.a.createElement("div",{className:"chat-line-document-name"},e.data.file.replace(/^.*[\\/]/,""))),this.getConvertedMessage(e.data.caption))}var n=0===e.by?"me":"you";return s.a.createElement("div",{className:"chat-line"},s.a.createElement("div",{className:"chat-line-wrapper ".concat(n)},"group"===this.props.chatType&&0!==e.by&&s.a.createElement("div",{className:"chat-message_by ".concat(n)},e.by),t,s.a.createElement("div",{className:"chat-message-time ".concat(n)},this.getTime(),0===e.by&&s.a.createElement("div",{className:"chat-message_delivery_status"},s.a.createElement(W,{status:e.read})))))}}]),t}(s.a.Component);V.contextTypes={showFullScreen:v.func},V.defaultProps={by:0};var Y=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"chat-line"},s.a.createElement("div",{className:"chat-date_marker"},function(e){var t=Date.now();if(e>t||e<=0)return null;e=new Date(e);var a=t-(e=(e=new Date(e.getFullYear(),e.getMonth(),e.getDate())).getTime());if(a<24*M)return"Today";if(a<48*M)return"Yesterday";var n=new Date(e);return"".concat(n.getDate(),"/").concat(n.getMonth()+1,"/").concat(n.getFullYear())}(this.props.date)))}}]),t}(s.a.Component),J=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).onScroll=function(e){var t=e.target,n=t.scrollTop,s=t.scrollHeight,r=t.clientHeight;0===n&&a.props.hasPreviousChat&&a.loadPreviousChat(),a.autoScroll=n===s-r,console.log("autoScroll: ",a.autoScroll)},a.loadPreviousChat=function(){a.previousChatUpdate=!0,a.props.loadPreviousChat(a.props.currentChatId)},a.createMessagesWithDateObjects=function(){return a.props.messages.reduce((function(e,t){var a=e.messages,n=e.currentDate,s=new Date(t.time);return!t.time||n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()&&n.getDate()===s.getDate()||(a.push({dateMarker:t.time}),e.currentDate=s),e.messages.push(t),e}),{messages:[],currentDate:new Date(0)}).messages},a.autoScroll=!1,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){if(this.unreadPointer)this.unreadPointer.scrollIntoView();else{var e=this.props.scrollerPosition;e?(console.log("ScrollerPositionThere"),this.chatContent.scrollTop=e,console.log(e)):this.endPointer.scrollIntoView()}}},{key:"componentDidUpdate",value:function(e,t,a){this.previousChatUpdate&&!this.props.loadingMessages?(this.chatContent.scrollTop=this.chatContent.scrollHeight-a.previousScrollHeight,this.previousChatUpdate=!1,this.unreadPointer&&this.props.removeUnreadPointer(this.props.currentChatId)):this.props.newMessageByMe&&(a.previousAutoScroll?(this.endPointer.scrollIntoView({behavior:"smooth"}),this.autoScroll=!0):this.endPointer.scrollIntoView(),this.props.cleanNewMessageByMe(),this.unreadPointer&&this.props.removeUnreadPointer(this.props.currentChatId)),a.previousAutoScroll&&(this.endPointer.scrollIntoView({behavior:"smooth"}),this.autoScroll=!0)}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return console.log("autoScroll: ",this.autoScroll),{previousScrollHeight:this.chatContent.scrollHeight,previousAutoScroll:this.autoScroll}}},{key:"componentWillUnmount",value:function(){this.unreadPointer&&this.props.removeUnreadPointer(this.props.currentChatId),this.props.updateScrollerPosition(this.chatContent.scrollTop,this.props.currentChatId)}},{key:"render",value:function(){var e=this,t=this.createMessagesWithDateObjects();return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"chat-content",ref:function(t){return e.chatContent=t},onScroll:this.onScroll},this.props.loadingMessages&&s.a.createElement("div",{className:"chat-line loading"},s.a.createElement(U,null)),t.map((function(t){return t.unreadPointer?s.a.createElement("div",{key:"unreadPointer",className:"chat-line"},s.a.createElement("div",{className:"chat-unread_messages",ref:function(t){e.unreadPointer=t}},"Unread Messages")):t.dateMarker?s.a.createElement(Y,{key:"date-".concat(t.dateMarker),date:t.dateMarker}):s.a.createElement(V,{message:t,key:t.id,chatType:e.props.chatType})})),s.a.createElement("div",{ref:function(t){e.endPointer=t}})))}}]),t}(s.a.Component),$=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={showEmojiPanel:!1},a.toggleEmojiPanel=function(){a.setState({showEmojiPanel:!a.state.showEmojiPanel})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onEmojiSelect,a=Object(f.a)(e,["onEmojiSelect"]);return s.a.createElement("span",{style:{position:"relative"}},s.a.createElement("button",Object.assign({className:"emoji",onClick:this.toggleEmojiPanel},a),this.props.children),this.state.showEmojiPanel&&s.a.createElement(y.a,{set:"google",style:{position:"absolute",bottom:"30px",right:"0"},onSelect:t}))}}]),t}(s.a.Component),G=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"chat-message-input"},s.a.createElement("input",{type:"text",onChange:this.props.onChange,value:this.props.message,ref:function(t){return e.props.reference(t)},className:"message_input"}),!!this.props.link&&s.a.createElement("div",{className:"chat-input-link-metadata"},s.a.createElement(w,{key:this.props.link,url:this.props.link})))}}]),t}(s.a.Component),q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).onButtonClick=function(){a.fileSelector.current.click()},a.fileSelected=function(e){var t=a.props.onFileSelected,n=e.target.files[0];if(n){if(console.log("File Selected"),console.log(n),a.props.maxFileSize&&n.size>a.props.maxFileSize)return console.log("File Size limit exceeded"),void a.props.notify("Max File Size limit exceeded ".concat(a.props.maxFileSize/1048576," MB"));t(n)}else console.log("File Deselected"),t(null)},a.fileSelector=s.a.createRef(),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onFileSelected,e.accept),a=Object(f.a)(e,["onFileSelected","accept"]);return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",Object.assign({},a,{onClick:this.onButtonClick}),this.props.children),s.a.createElement("input",{type:"file",ref:this.fileSelector,style:{display:"none"},onChange:this.fileSelected,accept:t}))}}]),t}(s.a.Component),K=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={showAttachmentsPanel:!1},a.toggleAttachmentPanel=function(){a.setState({showAttachmentsPanel:!a.state.showAttachmentsPanel})},a.imageSelected=function(e){var t=a.props.onAttachment;e?t(e,"image"):t(null,null)},a.videoSelected=function(e){var t=a.props.onAttachment;e?t(e,"video"):t(null,null)},a.documentSelected=function(e){var t=a.props.onAttachment;e?t(e,"document"):t(null,null)},a.cancelAttachment=function(){(0,a.props.onAttachment)(null,null)},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=(e.onAttachment,e.fileSelected),n=e.fileType,r=e.notify,i=Object(f.a)(e,["className","onAttachment","fileSelected","fileType","notify"]),c=a?"chat-file-selected":"",o="image"===n?"chat-file-selected":"",l="video"===n?"chat-file-selected":"",u="document"===n?"chat-file-selected":"";return s.a.createElement("span",{style:{position:"relative"}},s.a.createElement("button",Object.assign({className:"".concat(t," ").concat(c),onClick:this.toggleAttachmentPanel},i),this.props.children),this.state.showAttachmentsPanel&&s.a.createElement("div",{className:"chat-attachments-panel"},s.a.createElement(q,{type:"button",className:"chat-attachment-button ".concat(o),maxFileSize:25165824,onFileSelected:this.imageSelected,accept:"image/*",notify:r},s.a.createElement("i",{className:"fas fa-image"}," ")),s.a.createElement(q,{type:"button",className:"chat-attachment-button ".concat(l),maxFileSize:25165824,onFileSelected:this.videoSelected,accept:"video/*",notify:r},s.a.createElement("i",{className:"fas fa-video"}," ")),s.a.createElement(q,{type:"button",className:"chat-attachment-button ".concat(u),maxFileSize:25165824,onFileSelected:this.documentSelected,notify:r},s.a.createElement("i",{className:"fas fa-file"}," ")),s.a.createElement("button",{type:"button",className:"chat-attachment-button",onClick:this.cancelAttachment},s.a.createElement("i",{className:"fas fa-times"}," "))))}}]),t}(s.a.Component),Q=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={message:"",type:"text",link:null,file:null,fileSelected:!1},a.getLink=function(e){var t=x(e).lastFind((function(e){return"link"===e.type}));return t?t.word:null},a.onMessageInput=function(e){var t=e.target.value,n=null;"text"===a.state.type&&(n=a.getLink(t)),a.setState({message:t,link:n})},a.onAttachment=function(e,t){t?a.setState({file:e,type:t,fileSelected:!0}):a.setState({file:null,type:"text",fileSelected:!1})},a.onMessageSubmit=function(e){if(e.preventDefault(),"text"!==a.state.type||!a.state.message.match(F))if(a.state.message.length>10240)a.props.notify("Message too long. Max limit reached only 10240 characters allowed.");else{var t=a.props.updateMessage,n={data:a.state.message,type:a.state.type,id:-100,by:0,time:Date.now(),read:0,file:a.state.file};a.setState({message:"",type:"text",link:null,file:null,fileSelected:!1}),t(n)}},a.emojiUpdate=function(e){a.setState({message:a.state.message+e.native}),a.messageInput.focus()},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("form",{onSubmit:this.onMessageSubmit},s.a.createElement("div",{className:"chat-input"},s.a.createElement(G,{message:this.state.message,reference:function(t){return e.messageInput=t},onChange:this.onMessageInput,link:this.state.link}),s.a.createElement("button",{type:"submit",className:"button"},s.a.createElement("i",{className:"far fa-paper-plane"}," ")),s.a.createElement(K,{type:"button",className:"button",onAttachment:this.onAttachment,fileSelected:this.state.fileSelected,fileType:this.state.type,notify:this.props.notify},s.a.createElement("i",{className:"fas fa-paperclip"}," ")),s.a.createElement($,{type:"button",className:"button",onEmojiSelect:this.emojiUpdate},s.a.createElement("i",{className:"far fa-smile"}," "))))}}]),t}(s.a.Component),X=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={newMessageByMe:!1},a.cleanNewMessageByMe=function(){a.setState({newMessageByMe:!1})},a.updateNewMessageByMe=function(){a.setState({newMessageByMe:!0})},a.updateMessage=function(e){var t=a.props.currentChatId;a.updateNewMessageByMe(),a.props.updateMessage(t,e)},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.currentChatId,a=e.currentChat;return s.a.createElement("div",{className:"chat-body"},s.a.createElement(R,{name:a.name,time:a.lastSeen,avatar:a.avatar,closeCurrentChat:this.props.closeCurrentChat}),s.a.createElement(J,{hasPreviousChat:a.hasPreviousChat,currentChatId:t,messages:a.messages,unreadMsgCount:this.props.unreadMsgCount,removeUnreadPointer:this.props.removeUnreadPointer,loadPreviousChat:this.props.loadPreviousChat,chatType:a.chatType,scrollerPosition:this.props.scrollerPosition,updateScrollerPosition:this.props.updateScrollerPosition,newMessageByMe:this.state.newMessageByMe,newMessage:a.newMessage,cleanNewMessageByMe:this.cleanNewMessageByMe,loadingMessages:a.loadingMessages,notify:this.props.notify}),s.a.createElement(Q,{updateMessage:this.updateMessage,notify:this.props.notify}))}}]),t}(s.a.Component),Z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={scrollerPositions:{}},a.updateScrollerPosition=function(e,t){a.setState((function(a){var n=Object(o.a)({},a.scrollerPositions);return n[t]=e,{scrollerPositions:n}}))},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n=this.props,s=n.chat.currentChatId,r=n.markAsReadCurrentChat,i=this.props.chat.list.find((function(e){return e.id===s}));s&&i.newMessage&&r(s)}},{key:"render",value:function(){var e=this.props.chat.currentChatId,t=this.props.chat.list.find((function(t){return t.id===e}));return s.a.createElement("div",{className:"chat"},s.a.createElement(_,{loadingList:this.props.chat.loadingList,chat:this.props.chat,updateCurrentChat:this.props.updateCurrentChat,searchPerson:this.props.searchPerson,more:this.props.chat.more,noLoadingList:this.props.noLoadingList}),e&&t&&s.a.createElement(X,{currentChat:t,currentChatId:e,updateMessage:this.props.updateMessage,closeCurrentChat:this.props.closeCurrentChat,unreadMsgCount:t.unread,removeUnreadPointer:this.props.removeUnreadPointer,loadPreviousChat:this.props.loadPreviousChat,updateScrollerPosition:this.updateScrollerPosition,scrollerPosition:this.state.scrollerPositions[e],key:"chat-".concat(e),notify:this.props.notify}))}}]),t}(s.a.Component),ee=(a(576),a(259)),te=a(257),ae=a.n(te),ne=(a(582),s.a.createContext({}));function se(e){var t=e.children,a=Object(n.useState)({content:null,type:null,isFullScreen:!1}),r=Object(ee.a)(a,2),i=r[0],c=r[1],o=null;return i.isFullScreen&&("image"===i.type?o=s.a.createElement("div",{className:"image-view"},s.a.createElement("img",{src:i.content,alt:"view"})):"video"===i.type?o=s.a.createElement("div",{className:"image-view"},s.a.createElement(ae.a,{url:i.content,controls:!0,playing:!0,width:"100%",height:"100%"})):"ReactElement"===i.type&&(o=s.a.createElement("div",{className:"image-view"},i.content))),s.a.createElement(ne.Provider,{value:function(e,t){c({content:e,type:t,isFullScreen:!0})}},s.a.createElement("div",null,t,i.isFullScreen?s.a.createElement("div",{className:"full-screen"},s.a.createElement("div",{className:"exit",onClick:function(){c({content:null,type:null,isFullScreen:!1})}},"\xd7"),s.a.createElement("div",{className:"content centered"},o)):null))}var re=function(e){function t(){var e,n;Object(l.a)(this,t);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={chat:{loadingList:!1,more:!0,list:[{id:1,name:"Vishal",avatar:a(140),latestMessageTime:20,loadingMessages:!1,messages:[{id:1,by:"you",data:"222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222",time:1,type:"text",sendSeen:!1},{id:2,by:0,data:"2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222",time:2,type:"text",read:0},{id:3,by:0,data:"Hello",time:3,type:"text",read:1},{id:4,by:"you",data:"Hi",time:4,type:"text",sendSeen:!1},{unreadPointer:!0},{id:5,by:0,data:{image:a(141),caption:"Another Caption for image"},time:5,type:"image",read:2},{id:7,by:"you",data:{video:a(583),caption:"Avengers End Game"},type:"video",time:6,sendSeen:!1},{id:6,by:0,data:{image:a(141),caption:"A best Avatar Caption"},type:"image",time:7,read:3},{id:6,by:0,data:{file:a(141),name:"A best Avatar Caption gfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",caption:"A file caption "},type:"document",time:7,read:3}],lastSeen:Date.now(),unread:3,hasPreviousChat:!0,chatType:"group",newMessage:!0},{id:2,name:"Vishnu",avatar:a(140),latestMessageTime:30,loadingMessages:!0,messages:[{id:1,by:0,data:"Hello",time:1,type:"text"},{id:2,by:"you",data:"Hi",time:2,type:"text"},{id:3,by:0,data:"Hello",time:3,type:"text"},{id:4,by:"you",data:"Hi",time:4,type:"text"}],lastSeen:2,unread:0,hasPreviousChat:!1,chatType:"individual",newMessage:!1}],currentChatId:null}},n.searchPerson=function(){n.setState({chat:Object(o.a)({},n.state.chat,{loadingList:!0})}),setTimeout((function(){n.state.chat.more&&n.setState((function(e){return{chat:Object(o.a)({},e.chat,{more:!1,loadingList:!1,list:[].concat(Object(c.a)(e.chat.list),[{id:E.a.v4(),name:"Tony Stark",avatar:a(140),messages:[],lastSeen:2,unread:0,hasPreviousChat:!1,chatType:"individual",newMessage:!1}])})}}))}),3e3)},n.updateCurrentChat=function(e){n.setState((function(t){return{chat:Object(o.a)({},t.chat,{currentChatId:e,list:t.chat.list.map((function(t){return t.id===e?Object(o.a)({},t,{unread:0}):t}))})}}))},n.removeUnreadPointer=function(e){n.setState((function(t){return{chat:Object(o.a)({},t.chat,{list:t.chat.list.map((function(t){return t.id===e?Object(o.a)({},t,{messages:t.messages.filter((function(e){return!0!==e.unreadPointer}))}):t}))})}}))},n.closeCurrentChat=function(){n.setState({chat:Object(o.a)({},n.state.chat,{currentChatId:null})})},n.loadPreviousChat=function(e){n.state.chat.list.find((function(t){return t.id===e}));n.setState((function(e){return{chat:Object(o.a)({},e.chat,{list:e.chat.list.map((function(e){return Object(o.a)({},e,{loadingMessages:!0})}))})}})),setTimeout((function(){n.setState((function(t){return{chat:Object(o.a)({},t.chat,{list:t.chat.list.map((function(t){return t.id===e?Object(o.a)({},t,{loadingMessages:!1,messages:[{id:E.a.v4(),by:0,data:"Previous Message",time:1,type:"text"},{id:E.a.v4(),by:"Arun",data:"Previous Message",time:1,type:"text"}].concat(Object(c.a)(t.messages))}):t}))})}}))}),3e3)},n.updateMessage=function(e,t){var a=t,s=a.type,r=a.file,i=Object(p.a)(n);if("text"===s)i.setState((function(a){return{chat:Object(o.a)({},a.chat,{list:a.chat.list.map((function(a){return a.id===e?Object(o.a)({},a,{messages:[].concat(Object(c.a)(a.messages),[t])}):a}))})}}));else if(FileReader&&r){var l=new FileReader;l.onload=function(){"image"===s?t=Object(o.a)({},t,{data:{image:l.result,caption:t.data}}):"video"===s?t=Object(o.a)({},t,{data:{video:l.result,caption:t.data}}):"document"===s&&(t=Object(o.a)({},t,{data:{file:l.result,caption:t.data}})),i.setState((function(a){return{chat:Object(o.a)({},a.chat,{list:a.chat.list.map((function(a){return a.id===e?Object(o.a)({},a,{messages:[].concat(Object(c.a)(a.messages),[t])}):a}))})}}))},l.readAsDataURL(r)}},n.markAsReadCurrentChat=function(e){n.setState((function(t){return{chat:Object(o.a)({},t.chat,{list:t.chat.list.map((function(t){return t.id===e?Object(o.a)({},t,{messages:t.messages.map((function(e){return e.id&&!1===e.sendSeen?(console.log("Message Seen Delivery"),Object(o.a)({},e,{sendSeen:!0})):e})),newMessage:!1}):t}))})}}))},n.noLoadingList=function(){n.setState((function(e){return{chat:Object(o.a)({},e.chat,{loadingList:!1})}}))},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement(se,null,s.a.createElement("div",{className:"App"},s.a.createElement(Z,{chat:this.state.chat,updateCurrentChat:this.updateCurrentChat,closeCurrentChat:this.closeCurrentChat,updateMessage:this.updateMessage,removeUnreadPointer:this.removeUnreadPointer,loadPreviousChat:this.loadPreviousChat,markAsReadCurrentChat:this.markAsReadCurrentChat,searchPerson:this.searchPerson,noLoadingList:this.noLoadingList,notify:function(e){return console.log(e)}})))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[260,1,2]]]);
//# sourceMappingURL=main.ad4cb0bc.chunk.js.map